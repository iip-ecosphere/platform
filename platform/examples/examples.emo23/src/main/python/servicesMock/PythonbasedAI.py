import iip.Registry
from Version import Version
from Service import ServiceState
from Service import ServiceKind
from datatypes.ImageInput import ImageInput
from datatypes.ImageInputImpl import ImageInputImpl
from datatypes.Command import Command
from datatypes.CommandImpl import CommandImpl
from datatypes.AiResult import AiResult
from datatypes.AiResultImpl import AiResultImpl
from interfaces.PythonbasedAIInterface import PythonbasedAIInterface

import random

class PythonbasedAI(PythonbasedAIInterface):
    """Template service implementation for PythonbasedAI
       Generated by: EASy-Producer."""
    
    def __init__(self):
        """Initializes the service.""" 
        super().__init__()
    
    
    def processImageInput(self, data: ImageInput):
        """Asynchronous data processing method. Use self.ingest(data) to pass the result back to the data stream
           Possible output types: AiResultImpl
    
        Parameters:
          - data -- the data to process
        """
        result = AiResultImpl()
        result.aiId = self.getAiId()
        result.error = ['Shatter', 'Scratch', 'Geometry', 'Car missing', 'Normal']
        result.errorConfidence = [random.random(), random.random(), random.random(), random.random(), random.random()]
        result.imageUri = data.imageUri
        result.robotId = data.robotId
        self.ingest(result)
        print("PY-Static: " + str(result))
    
    def processCommand(self, data: Command):
        """Asynchronous data processing method. Use self.ingest(data) to pass the result back to the data stream
           Possible output types: AiResultImpl
    
        Parameters:
          - data -- the data to process
        """
        print("PY-Static: " + str(data))

#registers itself
PythonbasedAI()
