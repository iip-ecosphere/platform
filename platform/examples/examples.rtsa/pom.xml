<?xml version="1.0" encoding="UTF-8"?><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <artifactId>examples.rtsa</artifactId>
  <packaging>jar</packaging>
  <name>RTSA example</name>
  <description>Utilizing the RTSA platform service in a simple service chain for validation.</description>

  <parent>
     <groupId>de.iip-ecosphere.platform</groupId>
     <artifactId>platformDependencies</artifactId>
     <version>0.6.0-SNAPSHOT</version>
     <relativePath/>
  </parent>

  <dependencies>
    <dependency>
      <artifactId>configuration.configuration</artifactId>
      <groupId>de.iip-ecosphere.platform</groupId>
      <version>${project.version}</version>
    </dependency>
    
    <dependency>
      <artifactId>examples</artifactId>
      <groupId>de.iip-ecosphere.platform</groupId>
      <version>${project.version}</version>
    </dependency>
    
            <!-- the application itself, generated code -->   	
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <optional>true</optional>
      <scope>test</scope>
    </dependency>
    <dependency>
      <artifactId>configuration.configuration</artifactId>
      <groupId>de.iip-ecosphere.platform</groupId>
      <version>${project.version}</version>
      <type>test-jar</type>
      <scope>test</scope>
    </dependency>
  </dependencies>
  
  <properties>
        <iip.resources>resources</iip.resources>
        <iip.model>PlatformConfiguration</iip.model>
  </properties>
  
  <profiles>
     <profile>    
        <id>App</id>
        <dependencies>
		        <dependency>
			      <artifactId>SimpleRTSADemoFlowApp</artifactId>
			      <groupId>de.iip-ecosphere.platform.apps</groupId>
			      <version>0.1.0-SNAPSHOT</version> <!-- from config -->
			    </dependency>
		  <dependency>
					<artifactId>apps.ExampleRTSAAppInterfaces</artifactId>
					<groupId>de.iip-ecosphere.platform</groupId>
					<version>${project.version}</version>
	 	</dependency> 
        </dependencies>
        <build>
          <plugins>
              <plugin>
                  <groupId>org.codehaus.mojo</groupId>
                  <artifactId>exec-maven-plugin</artifactId>
                  <version>3.0.0</version>
                  <configuration>
                      <mainClass>de.iip_ecosphere.platform.examples.SpringStartup</mainClass>
                      <arguments>
                        <argument>gen/rtsa/SimpleRTSADemoFlowApp/target/SimpleRTSADemoFlowApp-0.1.0-SNAPSHOT-bin.jar</argument>
                      </arguments>
                  </configuration>
              </plugin>
          </plugins>
        </build> 
     </profile>
     <profile>
        <id>EasyGen</id>
        <properties>
            <maven.main.skip>true</maven.main.skip>
            <maven.test.skip>true</maven.test.skip>
            <maven.javadoc.skip>true</maven.javadoc.skip>
        </properties> 
        <dependencies>
            <dependency>
              <groupId>de.iip-ecosphere.platform</groupId>
              <artifactId>connectors</artifactId>
              <version>${project.version}</version>
            </dependency>
            <dependency>
              <groupId>de.iip-ecosphere.platform</groupId>
              <artifactId>connectors.opcuav1</artifactId>
              <version>${project.version}</version>
            </dependency>
        </dependencies>
          <build>
              <plugins>
                 <plugin>
                   <groupId>de.iip-ecosphere.platform</groupId>
                   <artifactId>dependency-plugin</artifactId>
                   <version>${project.version}</version>
                   <executions>
                     <execution>
                       <id>unpack</id>
                       <phase>generate-sources</phase>
                       <goals>
                         <goal>unpack</goal>
                       </goals>
                       <configuration>
                         <artifactItems>
                           <artifactItem>
                             <groupId>de.iip-ecosphere.platform</groupId>
                             <artifactId>configuration.configuration</artifactId>
                             <version>${project.version}</version>
                             <classifier>easy</classifier>
                             <type>zip</type>
                             <overWrite>true</overWrite>
                             <outputDirectory>${project.basedir}/src/main/easy</outputDirectory>
                             <destFileName>model.jar</destFileName>
                             <excludes>cfg/*.*</excludes>
                           </artifactItem>
                         </artifactItems>
			             <cleanup>
			                 <directory>${project.basedir}/src/main/easy</directory>
			                 <includes>
			                     <include>cfg</include>
			                     <include>files</include>
			                     <include>meta</include>
			                     <include>vtl</include>
			                     <include>IIPEcosphere*.*</include>
			                 </includes>
			             </cleanup>                         
                         <overWriteReleases>false</overWriteReleases>
                         <overWriteSnapshots>true</overWriteSnapshots>
                       </configuration>
                     </execution>
                   </executions>
                 </plugin>
                  <plugin>
	            <groupId>de.iip-ecosphere.platform</groupId>
	            <artifactId>configuration-plugin</artifactId>
	            <version>${project.version}</version>
	            <executions>
                        <execution>
                          <id>generateBroker</id>
                          <goals>
                            <goal>generateBroker</goal>
                          </goals>
                        </execution>
	                <execution>
	                    <id>generateAppsNoDeps</id>
	                    <goals>
	                        <goal>generateAppsNoDeps</goal>
	                    </goals>
	                </execution>
	                <execution>
	                    <id>generateApps</id>
	                    <goals>
	                        <goal>generateApps</goal>
	                    </goals>
	                </execution>
	            	</executions>
	            	<configuration>
	                	<model>${iip.model}</model>
	                	<outputDirectory>gen/rtsa</outputDirectory>
	            	</configuration>
	        	</plugin>
                 <plugin>
                   <groupId>org.codehaus.mojo</groupId>
                   <artifactId>exec-maven-plugin</artifactId>
                   <version>3.0.0</version>
                   <executions>
                         <execution>
                            <id>generateBroker</id>
                            <configuration>
                                <mainClass>de.iip_ecosphere.platform.configuration.PlatformInstantiator</mainClass>
                                <cleanupDaemonThreads>false</cleanupDaemonThreads>
                                <arguments>
                                    <argument>${iip.model}</argument>
                                    <argument>src/test/easy</argument>
                                    <argument>gen/broker</argument>
                                    <argument>generateBroker</argument>
                                </arguments>
                            </configuration>
                         </execution>
                         <execution>
                            <id>generateAppsNoDeps</id>
                            <configuration>
                                <mainClass>de.iip_ecosphere.platform.configuration.PlatformInstantiator</mainClass>
                                <cleanupDaemonThreads>false</cleanupDaemonThreads>
                                <arguments>
                                    <argument>${iip.model}</argument>
                                    <argument>src/test/easy</argument>
                                    <argument>gen/rtsa</argument>
                                    <argument>generateAppsNoDeps</argument>
                                </arguments>
                                <systemProperties>
                                   <systemProperty>
                                     <key>iip.resources</key>
                                     <value>${project.basedir}/${iip.resources}</value>
                                   </systemProperty>
                                </systemProperties>
                            </configuration>
                         </execution>
                         <execution>
                            <id>generateApps</id>
                            <configuration>
                                <mainClass>de.iip_ecosphere.platform.configuration.PlatformInstantiator</mainClass>
                                <cleanupDaemonThreads>false</cleanupDaemonThreads>
                                <arguments>
                                    <argument>${iip.model}</argument>
                                    <argument>src/test/easy</argument>
                                    <argument>gen/rtsa</argument>
                                    <argument>generateApps</argument>
                                </arguments>
                                <systemProperties>
                                   <systemProperty>
                                     <key>iip.resources</key>
                                     <value>${project.basedir}/${iip.resources}</value>
                                   </systemProperty>
                                </systemProperties>
                            </configuration>
                         </execution>
                   </executions>
                 </plugin>
              </plugins>
            </build> 
     </profile>
            <profile>
         <id>Main</id>
         <activation>
            <activeByDefault>true</activeByDefault>
         </activation>
        <properties>
            <maven.main.skip>true</maven.main.skip>
            <maven.test.skip>true</maven.test.skip>
            <python-compile.skip>true</python-compile.skip>
            <maven.javadoc.skip>true</maven.javadoc.skip>
        </properties>        

          <build>
              <plugins>
                 <plugin>
                    <groupId>de.iip-ecosphere.platform</groupId>
                    <artifactId>invoker-plugin</artifactId>
                    <version>${project.version}</version>
                    <executions>
                        <execution>
                            <id>genInterfaces</id>
		                    <goals>
		                        <goal>install</goal>
		                    </goals>
                            <configuration>
                                <invokeProfiles>
                                    <invokeProfile>EasyGen</invokeProfile>
                                </invokeProfiles>
                                <invokeGoals>
                                    <invokeGoal>process-sources</invokeGoal>
                                </invokeGoals>
                                <disableBuild>true</disableBuild>
                            </configuration>
                        </execution>
                        <execution>
                            <id>installServices</id>
		                    <goals>
		                        <goal>install</goal>
		                    </goals>
                            <configuration>
                                <invokeProfiles>
                                    <invokeProfile>App</invokeProfile>
                                </invokeProfiles>
                                <invokeGoals>
                                    <invokeGoal>install</invokeGoal>
                                </invokeGoals>
                                <systemProperties>
                                  <systemProperty>
                                    <key>skipTests</key>
                                    <value>true</value>
                                  </systemProperty>
                                </systemProperties>
                            </configuration>
                        </execution>
                        <execution>
                            <id>integrateApp</id>
		                    <goals>
		                        <goal>install</goal>
		                    </goals>
                            <configuration>
                                <invokeProfiles>
                                    <invokeProfile>EasyGen</invokeProfile>
                                </invokeProfiles>
                                <invokeGoals>
                                    <invokeGoal>package</invokeGoal>
                                </invokeGoals>
                                <disableBuild>true</disableBuild>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
          </build>
      </profile>
  </profiles>

</project>